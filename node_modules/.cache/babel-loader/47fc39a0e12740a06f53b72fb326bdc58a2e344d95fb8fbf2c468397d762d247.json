{"ast":null,"code":"var _jsxFileName = \"E:\\\\FE-BeeRushTech\\\\src\\\\Cart\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\"; // Cần cài axios để gửi yêu cầu HTTP\nimport styles from \"./Checkout.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Checkout = ({\n  onPay,\n  total\n}) => {\n  _s();\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(\"\"); // Dùng để lưu trữ URL thanh toán VNPay\n  const [toastMessage, setToastMessage] = useState(\"\"); // Quản lý thông báo\n\n  const showToast = message => {\n    setToastMessage(message);\n    setTimeout(() => {\n      setToastMessage(\"\"); // Ẩn thông báo sau 2 giây\n    }, 2000);\n  };\n  const handlePay = async () => {\n    if (paymentMethod === \"direct\") {\n      try {\n        // Gửi yêu cầu thanh toán đến API backend\n        const response = await axios.get(`/payment/vn-pay`);\n\n        // Lấy đường dẫn thanh toán VNPay từ response và hiển thị mã QR\n        setPaymentLink(response.data.data.paymentUrl); // Giả sử API trả về URL thanh toán từ VNPay\n\n        showToast(\"Payment request created. Please proceed with the payment.\");\n      } catch (error) {\n        showToast(\"An error occurred while creating the payment request.\");\n      }\n    } else if (paymentMethod === \"store\") {\n      showToast(\"Payment selected as Store Payment. Please proceed to the store.\");\n      onPay();\n    } else {\n      showToast(\"Please select a payment method.\");\n    }\n  };\n  const paymentMethods = [{\n    method: \"direct\",\n    label: \"Thanh toán trực tiếp (VNPay)\"\n  }, {\n    method: \"store\",\n    label: \"Thanh toán tại cửa hàng\"\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.checkout,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.paymentOptions,\n      children: paymentMethods.map(method => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.option,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: method.method,\n          name: \"paymentMethod\",\n          value: method.method,\n          onChange: () => setPaymentMethod(method.method)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: method.method,\n          children: method.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)]\n      }, method.method, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), paymentMethod === \"direct\" && paymentLink && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.qrContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Thanh to\\xE1n qua VNPay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: paymentLink // Đây là URL của mã QR trả về từ API\n        ,\n        alt: \"VNPay QR Code\",\n        className: styles.qrCode\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Qu\\xE9t m\\xE3 QR \\u0111\\u1EC3 thanh to\\xE1n s\\u1ED1 ti\\u1EC1n \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.payButton,\n      onClick: handlePay,\n      children: \"Thanh to\\xE1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), toastMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.toast,\n      children: toastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n};\n_s(Checkout, \"rsBGnkqGfAzS+eXmVn8ib/+RUoc=\");\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","axios","styles","jsxDEV","_jsxDEV","Checkout","onPay","total","_s","paymentMethod","setPaymentMethod","paymentLink","setPaymentLink","toastMessage","setToastMessage","showToast","message","setTimeout","handlePay","response","get","data","paymentUrl","error","paymentMethods","method","label","className","checkout","children","fileName","_jsxFileName","lineNumber","columnNumber","paymentOptions","map","option","type","id","name","value","onChange","htmlFor","qrContainer","src","alt","qrCode","payButton","onClick","toast","_c","$RefreshReg$"],"sources":["E:/FE-BeeRushTech/src/Cart/Checkout.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\"; // Cần cài axios để gửi yêu cầu HTTP\r\nimport styles from \"./Checkout.module.css\";\r\n\r\nconst Checkout = ({ onPay, total }) => {\r\n  const [paymentMethod, setPaymentMethod] = useState(null);\r\n  const [paymentLink, setPaymentLink] = useState(\"\"); // Dùng để lưu trữ URL thanh toán VNPay\r\n  const [toastMessage, setToastMessage] = useState(\"\"); // Quản lý thông báo\r\n\r\n  const showToast = (message) => {\r\n    setToastMessage(message);\r\n    setTimeout(() => {\r\n      setToastMessage(\"\"); // Ẩn thông báo sau 2 giây\r\n    }, 2000);\r\n  };\r\n\r\n  const handlePay = async () => {\r\n    if (paymentMethod === \"direct\") {\r\n      try {\r\n        // Gửi yêu cầu thanh toán đến API backend\r\n        const response = await axios.get(`/payment/vn-pay`);\r\n        \r\n        // Lấy đường dẫn thanh toán VNPay từ response và hiển thị mã QR\r\n        setPaymentLink(response.data.data.paymentUrl);  // Giả sử API trả về URL thanh toán từ VNPay\r\n        \r\n        showToast(\"Payment request created. Please proceed with the payment.\");\r\n      } catch (error) {\r\n        showToast(\"An error occurred while creating the payment request.\");\r\n      }\r\n    } else if (paymentMethod === \"store\") {\r\n      showToast(\"Payment selected as Store Payment. Please proceed to the store.\");\r\n      onPay();\r\n    } else {\r\n      showToast(\"Please select a payment method.\");\r\n    }\r\n  };\r\n\r\n  const paymentMethods = [\r\n    { method: \"direct\", label: \"Thanh toán trực tiếp (VNPay)\" },\r\n    { method: \"store\", label: \"Thanh toán tại cửa hàng\" }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.checkout}>\r\n      <h3>Chọn phương thức thanh toán</h3>\r\n      <div className={styles.paymentOptions}>\r\n        {paymentMethods.map((method) => (\r\n          <div key={method.method} className={styles.option}>\r\n            <input\r\n              type=\"radio\"\r\n              id={method.method}\r\n              name=\"paymentMethod\"\r\n              value={method.method}\r\n              onChange={() => setPaymentMethod(method.method)}\r\n            />\r\n            <label htmlFor={method.method}>{method.label}</label>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {paymentMethod === \"direct\" && paymentLink && (\r\n        <div className={styles.qrContainer}>\r\n          <h4>Thanh toán qua VNPay</h4>\r\n          <img\r\n            src={paymentLink}  // Đây là URL của mã QR trả về từ API\r\n            alt=\"VNPay QR Code\"\r\n            className={styles.qrCode}\r\n          />\r\n          <p>Quét mã QR để thanh toán số tiền {total}</p>\r\n        </div>\r\n      )}\r\n\r\n      <button className={styles.payButton} onClick={handlePay}>\r\n        Thanh toán\r\n      </button>\r\n\r\n      {/* Hiển thị Toast Message */}\r\n      {toastMessage && (\r\n        <div className={styles.toast}>\r\n          {toastMessage}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}