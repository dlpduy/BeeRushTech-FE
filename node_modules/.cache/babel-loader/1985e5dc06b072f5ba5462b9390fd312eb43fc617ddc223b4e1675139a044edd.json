{"ast":null,"code":"var _jsxFileName = \"E:\\\\FE-BeeRushTech\\\\src\\\\Cart\\\\Checkout.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport axios from \"axios\"; // Thư viện axios để gửi yêu cầu HTTP\nimport QRCode from \"react-qr-code\"; // Thư viện QR code React\nimport styles from \"./Checkout.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Checkout = ({\n  onPay,\n  total\n}) => {\n  _s();\n  const [paymentMethod, setPaymentMethod] = useState(null);\n  const [paymentLink, setPaymentLink] = useState(\"\"); // Lưu URL thanh toán từ VNPay\n  const [toastMessage, setToastMessage] = useState(\"\"); // Quản lý thông báo\n  const [loading, setLoading] = useState(false); // Quản lý trạng thái khi đang gửi yêu cầu thanh toán\n\n  const showToast = message => {\n    setToastMessage(message);\n    setTimeout(() => {\n      setToastMessage(\"\"); // Ẩn thông báo sau 2 giây\n    }, 2000);\n  };\n  const handlePay = async () => {\n    if (paymentMethod === \"direct\") {\n      setLoading(true);\n      try {\n        // Gửi yêu cầu thanh toán tới backend API\n        const response = await axios.get(`/payment/vn-pay`);\n\n        // Giả sử API trả về URL thanh toán VNPay\n        setPaymentLink(response.data.data.paymentUrl);\n        showToast(\"Payment request created. Please proceed with the payment.\");\n      } catch (error) {\n        showToast(\"An error occurred while creating the payment request.\");\n      } finally {\n        setLoading(false);\n      }\n    } else if (paymentMethod === \"store\") {\n      showToast(\"Payment selected as Store Payment. Please proceed to the store.\");\n      onPay();\n    } else {\n      showToast(\"Please select a payment method.\");\n    }\n  };\n  const paymentMethods = [{\n    method: \"direct\",\n    label: \"Thanh toán trực tiếp (VNPay)\"\n  }, {\n    method: \"store\",\n    label: \"Thanh toán tại cửa hàng\"\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.checkout,\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Ch\\u1ECDn ph\\u01B0\\u01A1ng th\\u1EE9c thanh to\\xE1n\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.paymentOptions,\n      children: paymentMethods.map(method => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.option,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"radio\",\n          id: method.method,\n          name: \"paymentMethod\",\n          value: method.method,\n          onChange: () => setPaymentMethod(method.method)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: method.method,\n          children: method.label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, method.method, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), paymentMethod === \"direct\" && paymentLink && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.qrContainer,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Thanh to\\xE1n qua VNPay\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(QRCode, {\n        value: paymentLink // Dùng URL thanh toán VNPay để tạo mã QR\n        ,\n        size: 150,\n        fgColor: \"#000000\",\n        bgColor: \"#ffffff\",\n        level: \"H\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Qu\\xE9t m\\xE3 QR \\u0111\\u1EC3 thanh to\\xE1n s\\u1ED1 ti\\u1EC1n \", total]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.payButton,\n      onClick: handlePay,\n      disabled: loading,\n      children: loading ? \"Đang xử lý...\" : \"Thanh toán\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), toastMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.toast,\n      children: toastMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(Checkout, \"cPPmwLnYf2oss8g9LLaBtfoDgog=\");\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["React","useState","axios","QRCode","styles","jsxDEV","_jsxDEV","Checkout","onPay","total","_s","paymentMethod","setPaymentMethod","paymentLink","setPaymentLink","toastMessage","setToastMessage","loading","setLoading","showToast","message","setTimeout","handlePay","response","get","data","paymentUrl","error","paymentMethods","method","label","className","checkout","children","fileName","_jsxFileName","lineNumber","columnNumber","paymentOptions","map","option","type","id","name","value","onChange","htmlFor","qrContainer","size","fgColor","bgColor","level","payButton","onClick","disabled","toast","_c","$RefreshReg$"],"sources":["E:/FE-BeeRushTech/src/Cart/Checkout.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\"; // Thư viện axios để gửi yêu cầu HTTP\r\nimport QRCode from \"react-qr-code\"; // Thư viện QR code React\r\nimport styles from \"./Checkout.module.css\";\r\n\r\nconst Checkout = ({ onPay, total }) => {\r\n  const [paymentMethod, setPaymentMethod] = useState(null);\r\n  const [paymentLink, setPaymentLink] = useState(\"\"); // Lưu URL thanh toán từ VNPay\r\n  const [toastMessage, setToastMessage] = useState(\"\"); // Quản lý thông báo\r\n  const [loading, setLoading] = useState(false); // Quản lý trạng thái khi đang gửi yêu cầu thanh toán\r\n\r\n  const showToast = (message) => {\r\n    setToastMessage(message);\r\n    setTimeout(() => {\r\n      setToastMessage(\"\"); // Ẩn thông báo sau 2 giây\r\n    }, 2000);\r\n  };\r\n\r\n  const handlePay = async () => {\r\n    if (paymentMethod === \"direct\") {\r\n      setLoading(true);\r\n      try {\r\n        // Gửi yêu cầu thanh toán tới backend API\r\n        const response = await axios.get(`/payment/vn-pay`);\r\n\r\n        // Giả sử API trả về URL thanh toán VNPay\r\n        setPaymentLink(response.data.data.paymentUrl);\r\n        showToast(\"Payment request created. Please proceed with the payment.\");\r\n      } catch (error) {\r\n        showToast(\"An error occurred while creating the payment request.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    } else if (paymentMethod === \"store\") {\r\n      showToast(\"Payment selected as Store Payment. Please proceed to the store.\");\r\n      onPay();\r\n    } else {\r\n      showToast(\"Please select a payment method.\");\r\n    }\r\n  };\r\n\r\n  const paymentMethods = [\r\n    { method: \"direct\", label: \"Thanh toán trực tiếp (VNPay)\" },\r\n    { method: \"store\", label: \"Thanh toán tại cửa hàng\" }\r\n  ];\r\n\r\n  return (\r\n    <div className={styles.checkout}>\r\n      <h3>Chọn phương thức thanh toán</h3>\r\n      <div className={styles.paymentOptions}>\r\n        {paymentMethods.map((method) => (\r\n          <div key={method.method} className={styles.option}>\r\n            <input\r\n              type=\"radio\"\r\n              id={method.method}\r\n              name=\"paymentMethod\"\r\n              value={method.method}\r\n              onChange={() => setPaymentMethod(method.method)}\r\n            />\r\n            <label htmlFor={method.method}>{method.label}</label>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {paymentMethod === \"direct\" && paymentLink && (\r\n        <div className={styles.qrContainer}>\r\n          <h4>Thanh toán qua VNPay</h4>\r\n          <QRCode\r\n            value={paymentLink}  // Dùng URL thanh toán VNPay để tạo mã QR\r\n            size={150}\r\n            fgColor=\"#000000\"\r\n            bgColor=\"#ffffff\"\r\n            level=\"H\"\r\n          />\r\n          <p>Quét mã QR để thanh toán số tiền {total}</p>\r\n        </div>\r\n      )}\r\n\r\n      <button\r\n        className={styles.payButton}\r\n        onClick={handlePay}\r\n        disabled={loading}\r\n      >\r\n        {loading ? \"Đang xử lý...\" : \"Thanh toán\"}\r\n      </button>\r\n\r\n      {/* Hiển thị Toast Message */}\r\n      {toastMessage && (\r\n        <div className={styles.toast}>\r\n          {toastMessage}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,OAAOC,KAAK,MAAM,OAAO,CAAC,CAAC;AAC3B,OAAOC,MAAM,MAAM,eAAe,CAAC,CAAC;AACpC,OAAOC,MAAM,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,MAAMC,QAAQ,GAAGA,CAAC;EAAEC,KAAK;EAAEC;AAAM,CAAC,KAAK;EAAAC,EAAA;EACrC,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EACxD,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpD,MAAM,CAACc,YAAY,EAAEC,eAAe,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACtD,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;;EAE/C,MAAMkB,SAAS,GAAIC,OAAO,IAAK;IAC7BJ,eAAe,CAACI,OAAO,CAAC;IACxBC,UAAU,CAAC,MAAM;MACfL,eAAe,CAAC,EAAE,CAAC,CAAC,CAAC;IACvB,CAAC,EAAE,IAAI,CAAC;EACV,CAAC;EAED,MAAMM,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAIX,aAAa,KAAK,QAAQ,EAAE;MAC9BO,UAAU,CAAC,IAAI,CAAC;MAChB,IAAI;QACF;QACA,MAAMK,QAAQ,GAAG,MAAMrB,KAAK,CAACsB,GAAG,CAAC,iBAAiB,CAAC;;QAEnD;QACAV,cAAc,CAACS,QAAQ,CAACE,IAAI,CAACA,IAAI,CAACC,UAAU,CAAC;QAC7CP,SAAS,CAAC,2DAA2D,CAAC;MACxE,CAAC,CAAC,OAAOQ,KAAK,EAAE;QACdR,SAAS,CAAC,uDAAuD,CAAC;MACpE,CAAC,SAAS;QACRD,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC,MAAM,IAAIP,aAAa,KAAK,OAAO,EAAE;MACpCQ,SAAS,CAAC,iEAAiE,CAAC;MAC5EX,KAAK,CAAC,CAAC;IACT,CAAC,MAAM;MACLW,SAAS,CAAC,iCAAiC,CAAC;IAC9C;EACF,CAAC;EAED,MAAMS,cAAc,GAAG,CACrB;IAAEC,MAAM,EAAE,QAAQ;IAAEC,KAAK,EAAE;EAA+B,CAAC,EAC3D;IAAED,MAAM,EAAE,OAAO;IAAEC,KAAK,EAAE;EAA0B,CAAC,CACtD;EAED,oBACExB,OAAA;IAAKyB,SAAS,EAAE3B,MAAM,CAAC4B,QAAS;IAAAC,QAAA,gBAC9B3B,OAAA;MAAA2B,QAAA,EAAI;IAA2B;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACpC/B,OAAA;MAAKyB,SAAS,EAAE3B,MAAM,CAACkC,cAAe;MAAAL,QAAA,EACnCL,cAAc,CAACW,GAAG,CAAEV,MAAM,iBACzBvB,OAAA;QAAyByB,SAAS,EAAE3B,MAAM,CAACoC,MAAO;QAAAP,QAAA,gBAChD3B,OAAA;UACEmC,IAAI,EAAC,OAAO;UACZC,EAAE,EAAEb,MAAM,CAACA,MAAO;UAClBc,IAAI,EAAC,eAAe;UACpBC,KAAK,EAAEf,MAAM,CAACA,MAAO;UACrBgB,QAAQ,EAAEA,CAAA,KAAMjC,gBAAgB,CAACiB,MAAM,CAACA,MAAM;QAAE;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eACF/B,OAAA;UAAOwC,OAAO,EAAEjB,MAAM,CAACA,MAAO;UAAAI,QAAA,EAAEJ,MAAM,CAACC;QAAK;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA,GAR7CR,MAAM,CAACA,MAAM;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OASlB,CACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,EAEL1B,aAAa,KAAK,QAAQ,IAAIE,WAAW,iBACxCP,OAAA;MAAKyB,SAAS,EAAE3B,MAAM,CAAC2C,WAAY;MAAAd,QAAA,gBACjC3B,OAAA;QAAA2B,QAAA,EAAI;MAAoB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAC7B/B,OAAA,CAACH,MAAM;QACLyC,KAAK,EAAE/B,WAAY,CAAE;QAAA;QACrBmC,IAAI,EAAE,GAAI;QACVC,OAAO,EAAC,SAAS;QACjBC,OAAO,EAAC,SAAS;QACjBC,KAAK,EAAC;MAAG;QAAAjB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACV,CAAC,eACF/B,OAAA;QAAA2B,QAAA,GAAG,gEAAiC,EAACxB,KAAK;MAAA;QAAAyB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5C,CACN,eAED/B,OAAA;MACEyB,SAAS,EAAE3B,MAAM,CAACgD,SAAU;MAC5BC,OAAO,EAAE/B,SAAU;MACnBgC,QAAQ,EAAErC,OAAQ;MAAAgB,QAAA,EAEjBhB,OAAO,GAAG,eAAe,GAAG;IAAY;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnC,CAAC,EAGRtB,YAAY,iBACXT,OAAA;MAAKyB,SAAS,EAAE3B,MAAM,CAACmD,KAAM;MAAAtB,QAAA,EAC1BlB;IAAY;MAAAmB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC3B,EAAA,CAzFIH,QAAQ;AAAAiD,EAAA,GAARjD,QAAQ;AA2Fd,eAAeA,QAAQ;AAAC,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}